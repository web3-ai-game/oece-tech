# ğŸ§  SVSå…±äº«å¤§è„‘ç³»ç»Ÿ - é«˜æƒ…å•†æ™ºèƒ½ä½“Bot

## ğŸ“‹ é¡¹ç›®æ¦‚è¿°

SVS(Shared Virtual System)æ˜¯ä¸€ä¸ªåŸºäº25ä¸ªGemini API keysçš„é«˜æƒ…å•†æ™ºèƒ½ä½“ç³»ç»Ÿï¼Œé›†æˆäº†Dopplerå¯†é’¥ç®¡ç†ã€GitHub CI/CDå’Œå®Œæ•´çš„ç›‘æ§ä½“ç³»ã€‚

### æ ¸å¿ƒç‰¹æ€§

- ğŸ§  **é«˜æƒ…å•†å¯¹è¯**: æƒ…ç»ªè¯†åˆ«ã€å…±æƒ…å›åº”ã€ä¸ªæ€§åŒ–è®°å¿†
- ğŸ”‘ **25ä¸ªGemini Keysè½®è¯¢**: æ™ºèƒ½è´Ÿè½½å‡è¡¡ï¼Œæ—¥å¤„ç†25k+è¯·æ±‚
- ğŸš€ **GitHub CI/CD**: è‡ªåŠ¨åŒ–éƒ¨ç½²ï¼Œæ‰‹æœºç«¯ä¹Ÿèƒ½æ”¹ä»£ç 
- ğŸ“Š **å®Œæ•´ç›‘æ§**: Prometheus + Grafanaå®æ—¶ç›‘æ§
- ğŸ’¾ **å…±äº«è®°å¿†**: Redisç¼“å­˜ + PostgreSQLæŒä¹…åŒ–
- ğŸ” **Dopplerç®¡ç†**: 55+å¯†é’¥é›†ä¸­ç®¡ç†

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

```text
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          Telegramç”¨æˆ·è¾“å…¥                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      é«˜æƒ…å•†Bot (æƒ…ç»ªè¯†åˆ«+å…±æƒ…)           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â€¢ æƒ…ç»ªæ£€æµ‹        â€¢ ä¸ªæ€§åŒ–å›å¤          â”‚
â”‚  â€¢ å†å²è®°å¿†        â€¢ å¹½é»˜é¼“åŠ±            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      Geminiè·¯ç”±å™¨ (25 Keys)              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â€¢ æ™ºèƒ½è½®è¯¢        â€¢ æ•…éšœåˆ‡æ¢            â”‚
â”‚  â€¢ é€Ÿç‡é™åˆ¶        â€¢ ç¼“å­˜ä¼˜åŒ–            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         å…±äº«å¤§è„‘ç³»ç»Ÿ                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Redisç¼“å­˜    PostgreSQL    Knowledge    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. ç¯å¢ƒè¦æ±‚

- Docker 20+
- Docker Compose 2+
- Python 3.11+
- 2GB+ RAM

### 2. ä¸€é”®éƒ¨ç½²

```bash
# å…‹éš†é¡¹ç›®
cd /mnt/volume_sgp1_01/svs

# è®¾ç½®æƒé™
chmod +x start.sh setup_doppler.sh

# é…ç½®Doppler(é¦–æ¬¡)
./setup_doppler.sh

# å¯åŠ¨æœåŠ¡
./start.sh

# æˆ–ç›´æ¥Docker
docker-compose up -d
```

### 3. éªŒè¯éƒ¨ç½²

```bash
# æŸ¥çœ‹çŠ¶æ€
docker-compose ps

# æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f high-eq-bot

# æµ‹è¯•Bot
# æ‰“å¼€Telegramï¼Œæœç´¢ @svsinst_bot
```

## ğŸ’¬ BotåŠŸèƒ½

### åŸºç¡€å‘½ä»¤

- `/start` - å¼€å§‹å¯¹è¯ï¼Œé€‰æ‹©å¿ƒæƒ…
- `/help` - æŸ¥çœ‹å¸®åŠ©
- `/mood` - è®°å½•å¿ƒæƒ…
- `/memory` - æŸ¥çœ‹å…±åŒå›å¿†
- `/joke` - å¬ä¸ªç¬‘è¯
- `/encourage` - è·å¾—é¼“åŠ±

### é«˜æƒ…å•†ç‰¹æ€§

1. **æƒ…ç»ªè¯†åˆ«**
   - è‡ªåŠ¨æ£€æµ‹å¼€å¿ƒã€éš¾è¿‡ã€ç”Ÿæ°”ã€ç„¦è™‘ã€ç–²æƒ«
   - æ ¹æ®æƒ…ç»ªè°ƒæ•´å›å¤è¯­æ°”

2. **ä¸ªæ€§åŒ–è®°å¿†**
   - è®°ä½ç”¨æˆ·åå¥½
   - è¿½è¸ªå¿ƒæƒ…å˜åŒ–
   - ä¿å­˜å¯¹è¯å†å²

3. **æ™ºèƒ½å›å¤**
   - å…±æƒ…å¼å›åº”
   - é€‚æ—¶å¹½é»˜
   - ç§¯æé¼“åŠ±

## ğŸ”‘ Doppleré…ç½®

### å¯†é’¥æ€»è§ˆ

```yaml
Gemini Keys: 25ä¸ª
Telegram Bots: 3ä¸ª
Supabase: å®Œæ•´é…ç½®
GitHub: CI/CD Token
Notion: çŸ¥è¯†åº“åŒæ­¥
ç›‘æ§: Sentry, DataDog, Honeybadger
```

### æŸ¥çœ‹å¯†é’¥

```bash
# åˆ—å‡ºæ‰€æœ‰å¯†é’¥
doppler secrets

# æŸ¥çœ‹ç‰¹å®šå¯†é’¥
doppler secrets get GEMINI_KEY_1

# å¯¼å‡ºç¯å¢ƒå˜é‡
doppler run -- env | grep GEMINI
```

## ğŸš¢ GitHub CI/CD

### è‡ªåŠ¨åŒ–æµç¨‹

1. **ä»£ç æ¨é€** â†’ GitHub Actionsè§¦å‘
2. **æµ‹è¯•è¿è¡Œ** â†’ pytest + coverage
3. **é•œåƒæ„å»º** â†’ Dockerå¤šé˜¶æ®µæ„å»º
4. **éƒ¨ç½²åˆ°VPS** â†’ SSHè‡ªåŠ¨éƒ¨ç½²
5. **å¥åº·æ£€æŸ¥** â†’ éªŒè¯æœåŠ¡çŠ¶æ€
6. **é€šçŸ¥Telegram** â†’ éƒ¨ç½²ç»“æœé€šçŸ¥

### æ‰‹æœºç«¯å¼€å‘

```bash
# ä½¿ç”¨Termiusè¿æ¥SSH
ssh root@68.183.239.153

# è¿›å…¥é¡¹ç›®
cd /mnt/volume_sgp1_01/svs

# ç¼–è¾‘ä»£ç 
vim high_eq_bot.py

# æäº¤æ”¹åŠ¨
git add .
git commit -m "ä¼˜åŒ–æƒ…å•†å›å¤"
git push

# GitHub Actionsè‡ªåŠ¨éƒ¨ç½²
```

## ğŸ“Š ç›‘æ§ç³»ç»Ÿ

### Grafanaä»ªè¡¨æ¿

è®¿é—®: `http://localhost:3000` (admin/admin)

ç›‘æ§æŒ‡æ ‡:

- Botå“åº”æ—¶é—´
- APIè°ƒç”¨æ¬¡æ•°
- å†…å­˜/CPUä½¿ç”¨
- é”™è¯¯ç‡
- ç”¨æˆ·æ´»è·ƒåº¦

### PrometheusæŸ¥è¯¢

```promql
# Botè¯·æ±‚ç‡
rate(bot_requests_total[5m])

# Gemini APIä½¿ç”¨
sum(gemini_api_calls_total) by (model)

# é”™è¯¯ç‡
rate(bot_errors_total[5m])
```

## ğŸ—„ï¸ æ•°æ®åº“ç»“æ„

### ä¸»è¦è¡¨

- `users` - ç”¨æˆ·ä¿¡æ¯
- `chat_sessions` - ä¼šè¯å†å²
- `messages` - æ¶ˆæ¯è®°å½•
- `mood_records` - æƒ…ç»ªè¿½è¸ª
- `knowledge_nodes` - çŸ¥è¯†å›¾è°±
- `api_usage` - APIä½¿ç”¨ç»Ÿè®¡
- `mycelium_transactions` - èŒä¸äº¤æ˜“

### æ•°æ®å¤‡ä»½

```bash
# å¤‡ä»½æ•°æ®åº“
docker exec svs-postgres pg_dump -U svs svs > backup.sql

# æ¢å¤æ•°æ®åº“
docker exec -i svs-postgres psql -U svs svs < backup.sql
```

## ğŸ”§ è¿ç»´ç®¡ç†

### æ—¥å¸¸ç»´æŠ¤

```bash
# é‡å¯æœåŠ¡
docker-compose restart high-eq-bot

# æ¸…ç†æ—¥å¿—
docker-compose logs --tail 100

# æ›´æ–°é•œåƒ
docker-compose pull
docker-compose up -d

# èµ„æºç›‘æ§
docker stats
```

### æ•…éšœæ’æŸ¥

```bash
# æ£€æŸ¥å®¹å™¨çŠ¶æ€
docker ps -a

# æŸ¥çœ‹é”™è¯¯æ—¥å¿—
docker-compose logs high-eq-bot | grep ERROR

# è¿›å…¥å®¹å™¨è°ƒè¯•
docker exec -it svs-high-eq-bot sh

# æµ‹è¯•Redisè¿æ¥
docker exec svs-redis redis-cli ping

# æµ‹è¯•æ•°æ®åº“
docker exec svs-postgres pg_isready
```

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–

### Geminiè·¯ç”±ä¼˜åŒ–

- **è½®è¯¢ç­–ç•¥**: 25ä¸ªkeysæ™ºèƒ½åˆ†é…
- **é”™è¯¯å¤„ç†**: è‡ªåŠ¨é™çº§å’Œé‡è¯•
- **ç¼“å­˜æœºåˆ¶**: Redis 5åˆ†é’Ÿç¼“å­˜
- **é€Ÿç‡é™åˆ¶**: 8333 RPMé™åˆ¶

### å†…å­˜ä¼˜åŒ–

- **Alpineé•œåƒ**: å‡å°‘60%ä½“ç§¯
- **èµ„æºé™åˆ¶**: Dockerå†…å­˜/CPUé™åˆ¶
- **è¿æ¥æ± **: æ•°æ®åº“è¿æ¥å¤ç”¨
- **å¼‚æ­¥å¤„ç†**: asyncioå¹¶å‘

## ğŸ”’ å®‰å…¨æªæ–½

- **å¯†é’¥åŠ å¯†**: Doppleré›†ä¸­ç®¡ç†
- **ç½‘ç»œéš”ç¦»**: Dockerå†…éƒ¨ç½‘ç»œ
- **è®¿é—®æ§åˆ¶**: Traefikåå‘ä»£ç†
- **æ—¥å¿—è„±æ•**: æ•æ„Ÿä¿¡æ¯è¿‡æ»¤

## ğŸ“ å¼€å‘æŒ‡å—

### æ·»åŠ æ–°åŠŸèƒ½

1. ç¼–è¾‘ `high_eq_bot.py`
2. æ·»åŠ å‘½ä»¤å¤„ç†å™¨
3. æ›´æ–°personalityé…ç½®
4. æäº¤åˆ°GitHub
5. è‡ªåŠ¨éƒ¨ç½²

### æµ‹è¯•

```bash
# è¿è¡Œæµ‹è¯•
doppler run -- pytest tests/

# æµ‹è¯•è¦†ç›–ç‡
doppler run -- pytest --cov=svs

# æ€§èƒ½æµ‹è¯•
doppler run -- python benchmark.py
```

## ğŸŒŸ ç‰¹è‰²åŠŸèƒ½

### 1. æƒ…å•†ç³»ç»Ÿ

- 5ç§åŸºç¡€æƒ…ç»ªè¯†åˆ«
- 10çº§æƒ…ç»ªå¼ºåº¦
- ä¸ªæ€§åŒ–å›å¤æ¨¡æ¿
- æƒ…ç»ªè¶‹åŠ¿åˆ†æ

### 2. è®°å¿†ç³»ç»Ÿ

- ç”¨æˆ·åå¥½è®°å¿†
- å¯¹è¯ä¸Šä¸‹æ–‡ä¿æŒ
- çŸ¥è¯†å›¾è°±æ„å»º
- é•¿æœŸè®°å¿†å­˜å‚¨

### 3. èŒä¸ç»æµ

- ç­¾åˆ°å¥–åŠ±
- ä»»åŠ¡ç³»ç»Ÿ
- ç­‰çº§æˆé•¿
- VIPç‰¹æƒ

## ğŸ“ è”ç³»æ”¯æŒ

- **Bot**: @svsinst_bot
- **åŸŸå**: `https://deepweay.me`
- **IP**: 68.183.239.153
- **ç›‘æ§**: Grafana/Prometheus

## ğŸ“„ è®¸å¯è¯

MIT License

---

**ç‰ˆæœ¬**: 1.0.0  
**æ›´æ–°**: 2025-11-10  
**ä½œè€…**: SVS Team

ğŸ§  è®©AIæ›´æ‡‚ä½ çš„æƒ…ç»ªï¼Œè®©å¯¹è¯æ›´æœ‰æ¸©åº¦ï¼
