# 4A Chatmode（默认开发模式）

更新时间：2025-09-18

目标
- 保证本地开发的核心能力（系统内置：读写文件/编辑/搜索/终端/本地预览）始终可用。
- 在“工具上限 108”约束下，把 GitHub MCP 的影响降到最低。
- 需要 GitHub 自动化时再按需启用少量高价值工具。

结论（先说能做什么、怎么用）
- 日常开发：不勾选 “MCP 服务器: github”（整台禁用）。只保留“内置”以及你常用的通用 MCP（如 context7、memory、sequentialthinking）。
- 需要 GitHub 自动化时：临时启用 GitHub 服务器，但只勾选下面的“精简白名单”（8–12 个以内），其余保持不勾选。

为什么这样取舍
- GitHub MCP 无法替代系统内置能力；它只负责远程操作 GitHub（Issue/PR/分支/Actions 等）。
- 禁用 GitHub MCP 不影响本地编辑/终端/搜索等关键功能，但能一次减少 60+ 个工具名额。

——

## 一、GitHub MCP 精简白名单（建议勾选 ≤ 12 个）

核心保留（长期用，建议 8 个以内）
- create_issue（建 Issue）
- add_issue_comment（Issue 评论）
- list_issues（列 Issue）
- create_pull_request（建 PR）
- create_branch（建分支）
- list_branches（列分支）
- list_pull_requests（列 PR）
- create_or_update_file（在仓库里创建/更新单个文件）

按需启用（CI/Actions 诊断时再勾，二选其一到三）
- list_commits（查看分支提交）
- get_workflow_run（查看某次 Workflow 运行详情）
- cancel_workflow_run（取消运行）
- download_workflow_run_artifact（下载构建产物，数据量大，谨慎勾选）

——

## 二、建议禁用的大头（默认不要勾选）

审阅细粒度（网页 Review 更顺手，且工具多、占名额）
- add_comment_to_pending_review
- create_pending_pull_request_review
- create_and_submit_pull_request_review
- delete_pending_pull_request_review
- create_pull_request_with_copilot（引入额外代理流程，性价比低）

组织/团队/讨论/社交类（管理场景，日常开发不需要）
- get_teams, get_team_members
- list_discussion_categories, list_discussions
- create_gist, list_gists
- list_notifications, dismiss_notification

安全/扫描/通告（接口多且噪声大）
- list_code_scanning_alerts, get_code_scanning_alert
- list_dependabot_alerts
- list_secret_scanning_alerts
- list_global_security_advisories
- list_repository_security_advisories
- list_org_repository_security_advisories

Actions 重负载（日志/用量/大文件下载）
- get_workflow_run_logs, delete_workflow_run_logs, get_workflow_run_usage

低频/网页更快处理
- create_repository, fork_repository, delete_file
- list_releases, get_tag
- add_sub_issue, assign_copilot_to_issue

——

## 三、如何在 UI 里快速设置

1) 默认开发模式（强烈推荐）
- 展开“工具与服务器”列表 → 取消勾选整行 “MCP 服务器: github”。
- 保留“内置”（系统自带）和你常用的通用 MCP（比如：context7、memory、sequentialthinking）。

2) GitHub 轻量模式（需要 GitHub 自动化时）
- 勾选 “MCP 服务器: github”。
- 在 github 下仅勾选“精简白名单”的 8–12 个工具；其余一律不勾选。
- 完成操作后可以再次取消勾选整个 github 服务器，恢复到极简配置。

提示
- 工具越少，调用更稳定、上下文更聚焦，也更省 token/时间。
- 如需把这套勾选保存成“预设/聊天模式”，请在客户端里保存当前选择，下次一键切换即可。

——

## 四、维护与排错

- 若出现“工具上限”提示：优先检查是否误勾选了 github 下的大量工具；直接取消整台 github 服务器通常即可恢复。
- 若某操作在 UI 上两步就能完成，优先在网页或本地 Git 完成；没必要为它开工具。
- 若 Actions 日志量过大导致对话变慢：临时不要勾选日志/产物下载相关工具（get_workflow_run_logs / download_workflow_run_artifact）。

——

## 五、可选：若你的客户端支持在 chatmode 文件里声明白/黑名单

部分客户端允许在 chatmode 文件中以“allowlist/denylist”声明启用工具（语法可能不同，下方仅为示意，按你的客户端文档调整）。

```yaml
name: "4A 默认开发模式"
description: "禁用 GitHub MCP；需要时再用 github-lite 预设。"
servers:
	- id: builtin
		enabled: true
	- id: context7
		enabled: true
	- id: memory
		enabled: true
	- id: sequentialthinking
		enabled: true
	- id: github
		enabled: false  # 默认禁用；需要时手动开启或切换到 github-lite 预设
```

另建一个 GitHub 轻量预设（示意）：

```yaml
name: "github-lite"
description: "仅在需要时启用的精简 GitHub 自动化"
servers:
	- id: github
		enabled: true
		tools:
			include:
				- create_issue
				- add_issue_comment
				- list_issues
				- create_pull_request
				- create_branch
				- list_branches
				- list_pull_requests
				- create_or_update_file
				- list_commits
				- get_workflow_run
				- cancel_workflow_run
			exclude:
				- create_pull_request_with_copilot
				- add_comment_to_pending_review
				- create_pending_pull_request_review
				- create_and_submit_pull_request_review
				- delete_pending_pull_request_review
				- get_teams
				- get_team_members
				- list_discussions
				- list_discussion_categories
				- create_gist
				- list_gists
				- list_code_scanning_alerts
				- get_code_scanning_alert
				- list_dependabot_alerts
				- list_secret_scanning_alerts
				- list_global_security_advisories
				- list_repository_security_advisories
				- list_org_repository_security_advisories
				- get_workflow_run_logs
				- delete_workflow_run_logs
				- get_workflow_run_usage
				- create_repository
				- fork_repository
				- delete_file
				- list_notifications
				- dismiss_notification
				- list_releases
				- get_tag
```

——

## 六、你可以怎么用这份文件

- 这份文件本身只是一份“操作与取舍指南”。
- 如果你的客户端不解析其中的 YAML 示例，照着“UI 操作步骤”手动勾选即可；若支持解析，则可直接把 YAML 作为配置使用。

附注
- 禁用 GitHub MCP 后，项目里的 `scripts/start-github-sync.sh`、`scripts/auto-index-github-mcp.js` 这类脚本对应的“AI 自动化 GitHub 操作”会失效；如需保留这类自动化，请在专用会话里启用 github-lite 即可。

---
description: 'Description of the custom chat mode.'
tools: []
---
Define the purpose of this chat mode and how AI should behave: response style, available tools, focus areas, and any mode-specific instructions or constraints.