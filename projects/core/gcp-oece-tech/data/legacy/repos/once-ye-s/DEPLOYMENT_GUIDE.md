# ğŸš€ éƒ¨ç½²æŒ‡å— - ä¸€é”®å¯åŠ¨ä½ çš„æ™ºèƒ½æ¶ˆæ¯ä¸­æ¢

## âœ… å·²å®Œæˆçš„å·¥ä½œ

ä½ çš„å¤šå¹³å°æ¶ˆæ¯èšåˆç³»ç»Ÿå·²ç»å®Œå…¨æ­å»ºå®Œæˆå¹¶æ¨é€åˆ°GitHubï¼

### ğŸ“¦ é¡¹ç›®ç»“æ„

```
once-ye-s/
â”œâ”€â”€ ğŸ“„ README.md                    # å®Œæ•´é¡¹ç›®æ–‡æ¡£
â”œâ”€â”€ ğŸ“„ QUICKSTART.md                # 5åˆ†é’Ÿå¿«é€Ÿå¼€å§‹
â”œâ”€â”€ ğŸ“„ TUTORIAL.md                  # è¯¦ç»†æ•™ç¨‹
â”œâ”€â”€ ğŸ³ docker-compose.yml           # Dockerç¼–æ’é…ç½®
â”œâ”€â”€ ğŸ”§ .env.example                 # ç¯å¢ƒå˜é‡æ¨¡æ¿
â”œâ”€â”€ ğŸ“‹ requirements.txt             # Pythonä¾èµ–
â”‚
â”œâ”€â”€ ğŸ³ docker/                      # Dockeré•œåƒ
â”‚   â”œâ”€â”€ bot.Dockerfile
â”‚   â”œâ”€â”€ collectors.Dockerfile
â”‚   â”œâ”€â”€ analyzer.Dockerfile
â”‚   â””â”€â”€ router.Dockerfile
â”‚
â”œâ”€â”€ ğŸ’» src/                         # æºä»£ç 
â”‚   â”œâ”€â”€ bot/main.py                # Telegram Bot (ç®¡ç†é¢æ¿+æ™ºèƒ½å¯¹è¯)
â”‚   â”œâ”€â”€ analyzer/main.py           # Gemini AIåˆ†æå™¨
â”‚   â”œâ”€â”€ router/main.py             # æ¶ˆæ¯è·¯ç”±ç³»ç»Ÿ
â”‚   â””â”€â”€ collectors/main.py         # å¤šå¹³å°æ¶ˆæ¯æ”¶é›†å™¨
â”‚
â”œâ”€â”€ ğŸ“š docs/                        # æ–‡æ¡£
â”‚   â””â”€â”€ API_SETUP.md               # APIé…ç½®è¯¦ç»†æŒ‡å—
â”‚
â”œâ”€â”€ ğŸ› ï¸ scripts/                     # å·¥å…·è„šæœ¬
â”‚   â”œâ”€â”€ setup.sh                   # ä¸€é”®éƒ¨ç½²è„šæœ¬
â”‚   â””â”€â”€ health_check.sh            # ç³»ç»Ÿå¥åº·æ£€æŸ¥
â”‚
â””â”€â”€ ğŸ”„ .github/workflows/          # CI/CD
    â””â”€â”€ docker-build.yml           # è‡ªåŠ¨æ„å»ºæµ‹è¯•
```

---

## ğŸ¯ æ ¸å¿ƒåŠŸèƒ½

### 1ï¸âƒ£ Telegram Bot (å·²å®ç°)
- âœ… ç®¡ç†å‘˜ä¸“ç”¨æ§åˆ¶é¢æ¿
- âœ… å†…è”æŒ‰é’®å¿«é€Ÿæ“ä½œ (ç»Ÿè®¡ã€è®¾ç½®ã€æ—¥å¿—ã€é‡å¯ç­‰)
- âœ… æ— éœ€æ–œæ å‘½ä»¤çš„æ™ºèƒ½å¯¹è¯
- âœ… ç¾¤ç»„è¢«åŠ¨å›å¤ (@æåŠæ‰å“åº”)
- âœ… ç§èŠä¸»åŠ¨äº¤äº’

### 2ï¸âƒ£ Gemini 2.5 Flash AI (å·²å®ç°)
- âœ… æ™ºèƒ½æ¶ˆæ¯åˆ†æ
- âœ… é€Ÿç‡é™åˆ¶æ§åˆ¶ (1000æ¬¡/å¤©)
- âœ… 30ç§’è½®è¯¢é—´éš”
- âœ… æ¶ˆæ¯åˆ†ç±»ã€é‡è¦æ€§è¯„åˆ†ã€æƒ…æ„Ÿåˆ†æ
- âœ… è‡ªåŠ¨æ‘˜è¦å’Œå›å¤å»ºè®®

### 3ï¸âƒ£ å®¹å™¨åŒ–æ¶æ„ (å·²å®ç°)
- âœ… 6ä¸ªDockeræœåŠ¡å®Œæ•´ç¼–æ’
- âœ… Redisæ¶ˆæ¯é˜Ÿåˆ—
- âœ… PostgreSQLæ•°æ®æŒä¹…åŒ–
- âœ… è‡ªåŠ¨é‡å¯å’Œå¥åº·æ£€æŸ¥

### 4ï¸âƒ£ æ¶ˆæ¯è·¯ç”±ç³»ç»Ÿ (å·²å®ç°)
- âœ… æ‰€æœ‰å¹³å° â†’ æ”¶é›†å™¨ â†’ è·¯ç”±å™¨ â†’ AIåˆ†æ â†’ Telegram
- âœ… é˜Ÿåˆ—ç®¡ç†å’Œç›‘æ§
- âœ… æ¶ˆæ¯æ ¼å¼ç»Ÿä¸€

### 5ï¸âƒ£ å¤šå¹³å°æ”¯æŒ (æ¡†æ¶å·²æ­å»º)
- âœ… Telegram
- âœ… Notion
- âœ… Slack
- âœ… WhatsApp
- âœ… LINE
- âœ… Facebook Messenger
- âœ… X (Twitter)

---

## ğŸš€ ç«‹å³éƒ¨ç½² (3æ­¥)

### æ­¥éª¤ 1: å‡†å¤‡APIå¯†é’¥ (5åˆ†é’Ÿ)

#### Telegram Bot
```
1. æ‰“å¼€Telegramï¼Œæœç´¢ @BotFather
2. å‘é€: /newbot
3. æŒ‰æç¤ºåˆ›å»ºBot
4. ä¿å­˜Bot Token

5. æœç´¢ @userinfobot è·å–ä½ çš„User ID
```

#### Gemini AI
```
1. è®¿é—®: https://aistudio.google.com/app/apikey
2. åˆ›å»ºAPI Key
3. ä¿å­˜å¯†é’¥
```

### æ­¥éª¤ 2: é…ç½®å’Œå¯åŠ¨ (2åˆ†é’Ÿ)

```bash
cd /root/once-ye-s

# ä¸€é”®éƒ¨ç½²
./scripts/setup.sh
```

è„šæœ¬ä¼šï¼š
1. âœ… æ£€æŸ¥ç¯å¢ƒ
2. âœ… åˆ›å»ºé…ç½®æ–‡ä»¶
3. âœ… è‡ªåŠ¨æ‰“å¼€ç¼–è¾‘å™¨è®©ä½ å¡«å…¥APIå¯†é’¥
4. âœ… æ„å»ºDockeré•œåƒ
5. âœ… å¯åŠ¨æ‰€æœ‰æœåŠ¡

### æ­¥éª¤ 3: æµ‹è¯•éªŒè¯ (1åˆ†é’Ÿ)

```bash
# 1. æŸ¥çœ‹æœåŠ¡çŠ¶æ€
docker-compose ps

# 2. æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f bot

# 3. åœ¨Telegramä¸­å‘é€ /start ç»™ä½ çš„Bot
```

---

## ğŸ“± ä½¿ç”¨ç¤ºä¾‹

### ç®¡ç†å‘˜é¢æ¿

åœ¨Telegramä¸­å‘é€ `/start`ï¼Œä½ ä¼šçœ‹åˆ°ï¼š

```
ğŸ›ï¸ ç®¡ç†å‘˜æ§åˆ¶é¢æ¿

è¯·é€‰æ‹©æ‚¨éœ€è¦çš„åŠŸèƒ½ï¼š

[ğŸ“Š æŸ¥çœ‹ç»Ÿè®¡]  [âš™ï¸ ç³»ç»Ÿè®¾ç½®]
[ğŸ” æ¶ˆæ¯æŸ¥è¯¢]  [ğŸ“ æ—¥å¿—æŸ¥çœ‹]
[ğŸ”„ é‡å¯æœåŠ¡]  [ğŸ“¤ å¯¼å‡ºæ•°æ®]
[ğŸ¤– AIè®¾ç½®]   [ğŸ“¡ å¹³å°ç®¡ç†]
```

### æ™ºèƒ½å¯¹è¯

ç›´æ¥å‘é€æ¶ˆæ¯ï¼š
```
ä½ : "å¸®æˆ‘æ€»ç»“ä»Šå¤©çš„é‡è¦æ¶ˆæ¯"
Bot: [ä½¿ç”¨Gemini AIåˆ†æå¹¶å›å¤]
```

### ç¾¤ç»„ä½¿ç”¨

```
åœ¨ç¾¤ç»„ä¸­:
ä½ : "@ä½ çš„bot è¿™æ¡æ¶ˆæ¯é‡è¦å—ï¼Ÿ"
Bot: [åˆ†æå¹¶å›å¤]
```

---

## ğŸ”§ å¸¸ç”¨å‘½ä»¤

```bash
# æŸ¥çœ‹æ‰€æœ‰æ—¥å¿—
docker-compose logs -f

# æŸ¥çœ‹ç‰¹å®šæœåŠ¡
docker-compose logs -f bot
docker-compose logs -f analyzer

# é‡å¯æœåŠ¡
docker-compose restart

# åœæ­¢æœåŠ¡
docker-compose down

# é‡æ–°æ„å»º
docker-compose build
docker-compose up -d

# å¥åº·æ£€æŸ¥
./scripts/health_check.sh

# æŸ¥çœ‹é˜Ÿåˆ—çŠ¶æ€
docker exec redis-queue redis-cli llen message_queue
```

---

## ğŸ“Š ç³»ç»Ÿæ¶æ„æµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ¶ˆæ¯æ¥æº (Message Sources)                  â”‚
â”‚  â€¢ Telegram Groups/Channels                 â”‚
â”‚  â€¢ Notion Database                          â”‚
â”‚  â€¢ Slack Workspace                          â”‚
â”‚  â€¢ WhatsApp Business                        â”‚
â”‚  â€¢ LINE Official Account                    â”‚
â”‚  â€¢ Facebook Page                            â”‚
â”‚  â€¢ X/Twitter                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ”¶é›†å™¨å®¹å™¨ (Collectors Container)           â”‚
â”‚  â€¢ 30ç§’è½®è¯¢æ”¶é›†                              â”‚
â”‚  â€¢ æ¶ˆæ¯æ ¼å¼æ ‡å‡†åŒ–                            â”‚
â”‚  â€¢ æ¨é€åˆ°Redisé˜Ÿåˆ—                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Redisæ¶ˆæ¯é˜Ÿåˆ— (Message Queue)               â”‚
â”‚  â€¢ raw_messages: åŸå§‹æ¶ˆæ¯                    â”‚
â”‚  â€¢ message_queue: å¾…åˆ†ææ¶ˆæ¯                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  è·¯ç”±å™¨å®¹å™¨ (Router Container)               â”‚
â”‚  â€¢ æ¶ˆæ¯éªŒè¯å’Œè·¯ç”±                            â”‚
â”‚  â€¢ é˜Ÿåˆ—ç®¡ç†                                  â”‚
â”‚  â€¢ ç»Ÿè®¡ç›‘æ§                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  AIåˆ†æå™¨å®¹å™¨ (Analyzer Container)           â”‚
â”‚  â€¢ Gemini 2.5 Flash                         â”‚
â”‚  â€¢ é€Ÿç‡é™åˆ¶: 1000æ¬¡/å¤©                       â”‚
â”‚  â€¢ æ¶ˆæ¯åˆ†ç±»ã€è¯„åˆ†ã€æƒ…æ„Ÿåˆ†æ                   â”‚
â”‚  â€¢ ç”Ÿæˆæ‘˜è¦å’Œå›å¤å»ºè®®                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Telegram Botå®¹å™¨ (Bot Container)            â”‚
â”‚  â€¢ æ¥æ”¶åˆ†æç»“æœ                              â”‚
â”‚  â€¢ æ¨é€ç»™ç®¡ç†å‘˜                              â”‚
â”‚  â€¢ ç®¡ç†é¢æ¿äº¤äº’                              â”‚
â”‚  â€¢ æ™ºèƒ½å¯¹è¯                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
          ä½ çš„Telegram
```

---

## ğŸ¨ è‡ªå®šä¹‰å¼€å‘

### æ·»åŠ æ–°çš„å¹³å°æ”¶é›†å™¨

1. åœ¨ `src/collectors/` åˆ›å»ºæ–°æ–‡ä»¶:
```python
# src/collectors/your_platform_collector.py
from .base_collector import BaseCollector

class YourPlatformCollector(BaseCollector):
    def __init__(self):
        super().__init__('YourPlatform')
        # åˆå§‹åŒ–APIå®¢æˆ·ç«¯
    
    async def collect_messages(self):
        # å®ç°æ”¶é›†é€»è¾‘
        return messages
```

2. åœ¨ `src/collectors/main.py` ä¸­æ³¨å†Œ:
```python
if os.getenv('YOUR_PLATFORM_API_KEY'):
    collectors.append(YourPlatformCollector())
```

3. é‡æ–°æ„å»º:
```bash
docker-compose build collectors
docker-compose restart collectors
```

### ä¿®æ”¹AIåˆ†ææç¤ºè¯

ç¼–è¾‘ `src/analyzer/main.py` çš„ `analyze_message()` æ–¹æ³•ä¸­çš„ promptã€‚

### æ·»åŠ æ–°çš„BotæŒ‰é’®

ç¼–è¾‘ `src/bot/main.py` çš„ `get_admin_keyboard()` å’Œ `button_callback()` å‡½æ•°ã€‚

---

## ğŸ“š æ–‡æ¡£ç´¢å¼•

- ğŸ“„ **README.md** - å®Œæ•´é¡¹ç›®æ–‡æ¡£å’Œæ¶æ„è¯´æ˜
- ğŸ“„ **QUICKSTART.md** - 5åˆ†é’Ÿå¿«é€Ÿå¼€å§‹æŒ‡å—
- ğŸ“„ **TUTORIAL.md** - ä»é›¶å¼€å§‹çš„è¯¦ç»†æ•™ç¨‹
- ğŸ“„ **docs/API_SETUP.md** - æ‰€æœ‰å¹³å°APIé…ç½®è¯¦è§£

---

## ğŸ”’ å®‰å…¨æœ€ä½³å®è·µ

1. **æ°¸è¿œä¸è¦æäº¤ .env æ–‡ä»¶åˆ°Git**
2. **å®šæœŸè½®æ¢APIå¯†é’¥**
3. **ä½¿ç”¨å¼ºå¯†ç **
4. **é™åˆ¶Botçš„ç®¡ç†å‘˜ID**
5. **ç›‘æ§APIè°ƒç”¨æ¬¡æ•°**
6. **å®šæœŸå¤‡ä»½æ•°æ®**

```bash
# å¤‡ä»½PostgreSQL
docker-compose exec postgres pg_dump -U admin message_hub > backup_$(date +%Y%m%d).sql

# å¤‡ä»½Redis
docker-compose exec redis redis-cli SAVE
```

---

## ğŸ†˜ æ•…éšœæ’é™¤

### Botæ— å“åº”
```bash
docker-compose logs bot
# æ£€æŸ¥Tokenæ˜¯å¦æ­£ç¡®
# æ£€æŸ¥ADMIN_IDæ˜¯å¦æ­£ç¡®
```

### AIä¸å·¥ä½œ
```bash
docker-compose logs analyzer
# æ£€æŸ¥API Keyæ˜¯å¦æœ‰æ•ˆ
# æ£€æŸ¥æ˜¯å¦è¾¾åˆ°é€Ÿç‡é™åˆ¶
```

### å®¹å™¨æ— æ³•å¯åŠ¨
```bash
docker-compose ps
docker-compose logs
# æ£€æŸ¥ç«¯å£æ˜¯å¦è¢«å ç”¨
# æ£€æŸ¥.envé…ç½®
```

### Redisè¿æ¥å¤±è´¥
```bash
docker-compose restart redis
docker exec redis-queue redis-cli ping
```

---

## ğŸ“ˆ ç›‘æ§å’Œç»´æŠ¤

### æ¯æ—¥æ£€æŸ¥
```bash
./scripts/health_check.sh
```

### æŸ¥çœ‹ç»Ÿè®¡
```bash
# é˜Ÿåˆ—é•¿åº¦
docker exec redis-queue redis-cli llen message_queue

# å®¹å™¨èµ„æºä½¿ç”¨
docker stats

# æ—¥å¿—æœ€å100è¡Œ
docker-compose logs --tail=100
```

### æ€§èƒ½ä¼˜åŒ–

1. **è°ƒæ•´è½®è¯¢é—´éš”**
   - ç¼–è¾‘ `.env` ä¸­çš„ `POLLING_INTERVAL`

2. **å¢åŠ å®¹å™¨èµ„æº**
   - ç¼–è¾‘ `docker-compose.yml` æ·»åŠ èµ„æºé™åˆ¶

3. **RedisæŒä¹…åŒ–ç­–ç•¥**
   - æ ¹æ®éœ€è¦è°ƒæ•´Redisé…ç½®

---

## ğŸ¯ ä¸‹ä¸€æ­¥è®¡åˆ’

### å·²å®Œæˆ âœ…
- [x] Telegram Bot with ç®¡ç†é¢æ¿
- [x] Gemini AI é›†æˆ
- [x] Docker å®¹å™¨åŒ–
- [x] æ¶ˆæ¯è·¯ç”±ç³»ç»Ÿ
- [x] å®Œæ•´æ–‡æ¡£

### å¾…å¼€å‘ ğŸš§
- [ ] Webç®¡ç†é¢æ¿
- [ ] æ¶ˆæ¯æœç´¢åŠŸèƒ½
- [ ] æ•°æ®åˆ†æDashboard
- [ ] æ›´å¤šå¹³å°APIå®ç°
- [ ] Webhookæ”¯æŒ
- [ ] æ’ä»¶ç³»ç»Ÿ

---

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤Issueå’ŒPull Requestï¼

```bash
# Forké¡¹ç›®
# åˆ›å»ºåŠŸèƒ½åˆ†æ”¯
git checkout -b feature/your-feature

# æäº¤æ›´æ”¹
git commit -m "Add your feature"

# æ¨é€
git push origin feature/your-feature

# åˆ›å»ºPull Request
```

---

## ğŸ“ æ”¯æŒ

- GitHub: https://github.com/web3-ai-game/once-ye-s
- Issues: https://github.com/web3-ai-game/once-ye-s/issues

---

## ğŸ‰ å¼€å§‹ä½¿ç”¨ï¼

```bash
cd /root/once-ye-s
./scripts/setup.sh
```

**ä½ çš„æ™ºèƒ½æ¶ˆæ¯ä¸­æ¢å·²ç»å‡†å¤‡å°±ç»ªï¼** ğŸš€

ç«‹å³åœ¨Telegramä¸­æµ‹è¯•ä½ çš„Botï¼Œä½“éªŒAIé©±åŠ¨çš„æ¶ˆæ¯èšåˆç³»ç»Ÿï¼
