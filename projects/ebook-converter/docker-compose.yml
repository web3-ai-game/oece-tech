version: '3.8'

services:
  ebook-converter:
    build: .
    container_name: ebook-converter
    volumes:
      - ./data:/data
      - /home/sms/ebook-pipeline/gcs-mount:/gcs-mount
      - /home/sms/ebook-pipeline/baidu-cache:/baidu-source
    environment:
      - GEMINI_API_KEY=AIzaSyCG459HOLhXkbDQgw8rSYAvuqyM3RdMQHQ
      - AWS_ACCESS_KEY_ID=${AWS_ACCESS_KEY_ID}
      - AWS_SECRET_ACCESS_KEY=${AWS_SECRET_ACCESS_KEY}
      - PYTHONUNBUFFERED=1
    working_dir: /app
    command: tail -f /dev/null
    restart: unless-stopped
