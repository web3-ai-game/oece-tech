---
distilled_by: grok-4-0709
mode: B
---
part: 2
---

## 2. VPS 資源與存儲配置

### 2.1 VPS 硬體配置深度解析
VPS 位於 DigitalOcean SGP1（新加坡），IP 為 104.248.150.152。背景是亞太地區的數據中心提供低延遲連接，適合全球用戶。原理基於虛擬化技術，如 KVM，將物理伺服器分割成獨立 VPS，確保隔離與安全性。

實例：一個電商平台使用類似配置，處理高峰期 1000+ 請求/秒，而不需額外擴展。

#### 2.11 存儲分配策略
存儲分為系統盤（/dev/vda1）和外掛盤（/dev/sda），所有工作目錄置於外掛盤。背景是為了數據持久化，避免系統重啟丟失數據。原理是 Linux 文件系統的 mount 機制，將外掛盤映射到 /mnt/，實現分離。

實例：在一個備份系統中，此策略防止了數據丟失，當系統盤故障時，外掛盤數據完整保留。

代碼範例 1：掛載外掛盤（bash 腳本）
```bash
# 檢查磁盤是否存在
lsblk -f

# 格式化並掛載（僅首次）
sudo mkfs.ext4 /dev/sda
sudo mkdir /mnt/volume_sgp1_01
sudo mount /dev/sda /mnt/volume_sgp1_01

# 添加到 fstab 以持久化
echo '/dev/sda /mnt/volume_sgp1_01 ext4 defaults 0 0' | sudo tee -a /etc/fstab
```

### 2.2 DNS 配置問題與修復
當前 DNS A 記錄錯誤指向 209.38.56.129，正確應為 104.248.150.152。背景是 DNS 誤配常見於遷移過程，導致域名無法解析。原理是 DNS 的分佈式查詢系統，A 記錄將域名映射到 IP。

實例：一個網站遷移後，DNS 錯誤導致 24 小時宕機，修復後流量恢復。

#### 2.21 修復步驟詳解
需修改 Record ID 156483879 和 156483880。保留 MX、CNAME 等記錄以維持郵箱功能。背景是 DNS 記錄類型多樣，MX 用於郵件路由。原理涉及 TTL（Time To Live），修復後需等待傳播。

代碼範例 2：驗證 DNS（bash）
```bash
# 使用 dig 查詢 A 記錄
dig oece.tech +short  # 應返回 104.248.150.152

# 如果未更新，檢查 TTL
dig oece.tech
```

| DNS 記錄類型 | 目的 | 當前狀態 | 修改建議 |
|--------------|------|----------|----------|
| A | IP 映射 | 錯誤 | 更新到正確 IP |
| MX | 郵件伺服器 | 正確 | 保留 |
| CNAME | 別名 | 正確 | 保留 |
| TXT | 驗證 | 正確 | 保留 |
