---
source: knowledge-mixer_repos_infinity_src_parser_queries.txt
distilled_at: 2026-02-14T09:26:48.176Z
model: grok-4-1-fast-non-reasoning
---

# 查詢語言知識文檔：進階搜索運算子與語法指南

本文檔詳細介紹一種強大的全文搜索查詢語言，支援精確匹配、範圍查詢、名稱限定、布林邏輯及權重調整。該語言常用於資料庫、搜尋引擎（如 Elasticsearch 或類似系統）中，允許使用者精準篩選與排序結果。核心概念圍繞**字段**（如 `name`、`page_count`、`author`）、**運算子**及**布林組合**展開。

## 1. 關鍵查詢運算子

這些運算子用於直接搜尋預設字段（通常為全文或主要索引字段）。支援多種匹配類型，包括精確、模糊、通配符及範圍。

### 基本匹配
- **精確匹配**：使用 `=` 前綴，僅匹配完全相同的值。
  ```
  =123          // 精確匹配數字 123
  =google       // 精確匹配字串 "google"
  ```

### 範圍與比較運算子
範圍查詢使用方括號 `[]`（包含邊界）或大括號 `{}`（排除邊界），並支援 `TO` 關鍵字定義上下界。比較運算子則直接指定單邊條件。

- **比較**：
  ```
  <123          // 小於 123
  <google       // 字典序小於 "google"
  >123          // 大於 123
  >google       // 字典序大於 "google"
  <= 123.456    // 小於等於 123.456
  <= google     // 字典序小於等於 "google"
  >= 123.456    // 大於等於 123.456
  >= google     // 字典序大於等於 "google"
  ```

- **範圍**：
  ```
  {TO 123.456}           // 大於負無窮，小於 123.456（開區間）
  {TO google}            // 大於負無窮，小於 "google"
  [-1000 TO]             // 大於等於 -1000，小於正無窮（半開）
  [google TO]            // 大於等於 "google"，小於正無窮
  {-1000 TO 123.456]     // 大於 -1000，小於等於 123.456
  {microsoft TO google}  // 大於 "microsoft"，小於 "google"
  [-1000 TO 123.456}     // 大於等於 -1000，小於 123.456
  ```

### 通配符與模糊匹配
- `dune`：基本詞彙匹配。
- `/star.*/`：正則表達式匹配（斜線包圍）。
- `duna~`：模糊匹配（~ 表示允許拼寫錯誤或近似）。

**範例**：`dune OR /star.*/ AND duna~` 會匹配包含 "dune" 或符合正則的詞，並模糊匹配 "duna"。

## 2. 名稱限定查詢 (name:)

使用 `name:` 前綴限定特定字段 `name`，適用於結構化資料篩選。語法與關鍵查詢相同，但僅作用於 `name` 字段。

### 基本範例
```
name:dune             // name 字段精確或基本匹配 "dune"
name:/star.*/         // name 字段正則匹配
name:duna~            // name 字段模糊匹配
```

### 精確與比較
```
name:=123             // name 精確等於 123
name:<google          // name 字典序小於 "google"
name:>123             // name 大於 123
name:<= 123.456       // name 小於等於 123.456
```

### 範圍範例
```
name:{TO 123.456}     // name 大於負無窮，小於 123.456
name:[-1000 TO]       // name 大於等於 -1000
name:{microsoft TO google}  // name 在 "microsoft" 與 "google" 之間（開區間）
```

**脈絡**：此限定有助於過濾特定屬性，如書籍名稱或產品 ID，避免全文雜訊。

## 3. 布林與進階查詢

布林運算子允許組合多條件：**AND**（隱含或顯式）、**OR**。支援字段存在檢查 (`_exists_`) 及**權重提升** (`^數字`，預設 1.0，提升相關性排序)。

### 基本布林
```
dune god              // 隱含 AND：兩詞皆存在
dune OR god           // 任一匹配
dune AND god          // 兩詞皆匹配
```

### 組合與字段
```
dune AND page_count:>200          // dune 且 page_count > 200
_exists_:"author" AND page_count:>200 AND (name:/star.*/ OR name:duna~)
  // author 存在、page_count > 200，且 (name 正則或模糊匹配)
```

### 權重提升
```
_exists_:"author" AND page_count:>200^1.3 AND (name:/star.*/ OR name:duna~^1.2)^1.2
```
- `page_count:>200^1.3`：提升此條件權重 30%。
- `(name:/star.*/ OR name:duna~^1.2)^1.2`：子群組內模糊匹配權重 +20%，整體群組 +20%。

**解析**：權重用於相關性評分，高權重條件優先排序結果。

## 4. 核心概念

### 字段 (Fields)
查詢可指定字段，預設為全文索引。常見字段：
- `name`：名稱或標題。
- `page_count`：數值字段，如頁數。
- `author`：文字字段，使用 `_exists_:"author"` 檢查是否存在（非空）。

**檢查存在**：`_exists_:"字段名"` 確認字段有值。

### 查詢類型總覽
| 類型 | 語法 | 說明 |
|------|------|------|
| **通配符** | `*` (內嵌於 `/...*/`) | 模式匹配，如 `/star.*/`。 |
| **模糊** | `~` | 允許編輯距離（如拼寫變體）。 |
| **範圍** | `[]` (閉)、`{}` (開)、`TO` | 數值/字串區間。 |
| **布林** | `AND`, `OR`, 括號 `()` | 邏輯組合。 |
| **精確/比較** | `=`, `<`, `>`, `<=`, `>=` | 嚴格匹配或邊界比較。 |
| **權重** | `^1.3` | 提升排序優先級。 |

## 使用提示
- **優先級**：布林括號確保邏輯正確；權重調整結果排序。
- **效能**：範圍與限定字段比全文更快；避免過度複雜正則。
- **常見錯誤**：忘記空格（如 `duneANDgod` 無效）；範圍邊界符號混淆。
- **應用場景**：書籍搜尋（`name:star* AND page_count:>200`）、資料分析篩選。

此文檔基於提供的查詢事實，確保語法精準。如需特定工具整合，請參考系統文件。