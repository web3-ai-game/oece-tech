---
source: safe-docs_audit-20260214_UPSTASH_REDIS_SETUP.md
distilled_at: 2026-02-14T09:29:43.366Z
model: grok-4-1-fast-non-reasoning
---

# Upstash Redis çŸ¥è­˜æ–‡æª”ï¼šoece.tech ç„¡ä¼ºæœå™¨ Redis éƒ¨ç½²æŒ‡å—

## ğŸ“‹ æ¦‚è¿°

**Upstash Redis** æ˜¯ä¸€å€‹å®Œå…¨ç„¡ä¼ºæœå™¨çš„ Redis æœå‹™ï¼Œå°ˆç‚ºç¾ä»£é›²åŸç”Ÿæ‡‰ç”¨è¨­è¨ˆã€‚é‡å° **oece.tech** é …ç›®ï¼Œå®ƒä¸»è¦ç”¨æ–¼ **API é™æµ**ã€**ç·©å­˜å„ªåŒ–** å’Œ **é˜²æ­¢æ¿«ç”¨**ï¼Œæä¾›é«˜æ•ˆçš„æ•¸æ“šå­˜å„²å’Œè¨ªå•æ§åˆ¶ã€‚

### æ ¸å¿ƒå„ªå‹¢
- **ç„¡ä¼ºæœå™¨æ¶æ§‹**ï¼šç„¡éœ€ç®¡ç†åŸºç¤è¨­æ–½ï¼ŒæŒ‰ä½¿ç”¨ä»˜è²»
- **å…¨çƒåˆ†ä½ˆå¼**ï¼šä½å»¶é²ï¼Œæ”¯æŒå¤šå€åŸŸéƒ¨ç½²
- **REST API æ”¯æ´**ï¼šç„¡éœ€ Redis å®¢æˆ¶ç«¯ï¼Œç›´æ¥ HTTP è¨ªå•
- **å…è²»é¡åº¦å……è¶³**ï¼šå®Œå…¨æ»¿è¶³ oece.tech éœ€æ±‚

## ğŸ’° å…è²»é¡åº¦è©³æƒ…

Upstash æä¾› generous å…è²»æ–¹æ¡ˆï¼Œå®Œå…¨è¦†è“‹ oece.tech çš„é‹ç‡Ÿéœ€æ±‚ï¼š

| è³‡æº | é¡åº¦ | oece.tech é©ç”¨æ€§ |
|------|------|-----------------|
| **å‘½ä»¤æ•¸** | 10,000 å‘½ä»¤/å¤© | âœ… å®Œå…¨è¶³å¤  |
| **å­˜å„²ç©ºé–“** | 256MB | âœ… å®Œå…¨è¶³å¤  |
| **é€£æ¥æ•¸** | ç„¡é™ï¼ˆæŒ‰å‘½ä»¤è¨ˆè²»ï¼‰ | âœ… ç„¡é™åˆ¶ |
| **æ•¸æ“šå‚³è¼¸** | ç„¡é™åˆ¶ | âœ… ç„¡é™åˆ¶ |

**çµè«–**ï¼šoece.tech **ç„¡éœ€ä»˜è²»**å³å¯ä½¿ç”¨æ‰€æœ‰ Redis åŠŸèƒ½ã€‚

## ğŸ› ï¸ å¿«é€Ÿè¨­ç½®æ­¥é©Ÿ

### 1. è¨»å†Šå¸³æˆ¶
```
ğŸ‘‰ å‰å¾€ https://upstash.com/
ğŸ‘‰ ä½¿ç”¨ GitHub å¸³æˆ¶ç™»éŒ„ï¼ˆæ¨è–¦ï¼Œæœ€å¿«ï¼‰
```

### 2. å‰µå»º Redis æ•¸æ“šåº«
```
æ•¸æ“šåº«åç¨±ï¼šoece-tech-redis
é¡å‹ï¼šRegionalï¼ˆå…è²»æ–¹æ¡ˆï¼‰
å€åŸŸï¼šSingapore (ap-southeast-1) âœ… æœ€ä½å»¶é²
```

![å‰µå»ºæ•¸æ“šåº«æˆªåœ–ä½ç½®]

### 3. ç²å–é€£æ¥é…ç½®
å¾ **Database é é¢** è¤‡è£½ä»¥ä¸‹å…©å€‹é—œéµè®Šæ•¸ï¼š

```
UPSTASH_REDIS_REST_URL=https://your-db-id.upstash.io
UPSTASH_REDIS_REST_TOKEN=your_token_here
```

### 4. é…ç½®ç’°å¢ƒè®Šæ•¸
åœ¨é …ç›®æ ¹ç›®éŒ„çš„ `.env.local` æ–‡ä»¶ä¸­æ·»åŠ ï¼š

```env
UPSTASH_REDIS_REST_URL=https://your-db.upstash.io
UPSTASH_REDIS_REST_TOKEN=your_token_here
```

### 5. é‡å•Ÿæ‡‰ç”¨
```bash
pm2 restart oece-tech
```

âœ… **è¨­ç½®å®Œæˆï¼** Redis å³åˆ»å¯ç”¨ã€‚

## ğŸ¯ ä¸»è¦ç”¨é€”

### 1. **API èª¿ç”¨é »ç‡é™åˆ¶ï¼ˆRate Limitingï¼‰**
```javascript
// ç¯„ä¾‹ï¼šæ¯ IP æ¯åˆ†é˜æœ€å¤š 60 æ¬¡è«‹æ±‚
const rateLimitKey = `rate_limit:${ip}`
await redis.incr(rateLimitKey)
await redis.expire(rateLimitKey, 60) // 60ç§’éæœŸ
```

### 2. **ç·©å­˜åŠ é€Ÿ**
- å­˜å„²ç†±é–€ API éŸ¿æ‡‰
- æ¸›å°‘æ•¸æ“šåº«æŸ¥è©¢
- æå‡éŸ¿æ‡‰é€Ÿåº¦ 5-10 å€

### 3. **é˜²æ­¢æ¿«ç”¨**
- åµæ¸¬ç•°å¸¸æµé‡
- è‡ªå‹•å°é–æƒ¡æ„ IP
- ä¿è­·ä¼ºæœå™¨è³‡æº

## âš ï¸ é‡è¦æ³¨æ„äº‹é …

### âœ… å¯é¸é…ç½®
```
oece.tech æ‡‰ç”¨ï¼š
âŒ ç„¡ Upstash Redis â†’ æ­£å¸¸é‹è¡Œï¼ˆç„¡é™æµä¿è­·ï¼‰
âœ… æœ‰ Upstash Redis â†’ å¢åŠ é™æµä¿è­·
```

### ğŸ”§ æ•…éšœæ’é™¤
| å•é¡Œ | è§£æ±ºæ–¹æ¡ˆ |
|------|----------|
| é€£æ¥å¤±æ•— | æª¢æŸ¥ `.env.local` è®Šæ•¸æ˜¯å¦æ­£ç¢º |
| å‘½ä»¤è¶…é™ | å…è²»é¡åº¦é‡ç½®ï¼ˆæ¯æ—¥ UTC 00:00ï¼‰ |
| å»¶é²é«˜ | ç¢ºèªé¸æ“‡ Singapore å€åŸŸ |

### ğŸ“Š ç›£æ§èˆ‡ç®¡ç†
- **Upstash Console**ï¼šå¯¦æ™‚æŸ¥çœ‹å‘½ä»¤ä½¿ç”¨é‡ã€å­˜å„²çµ±è¨ˆ
- **è‡ªå‹•æ“´å±•**ï¼šå…è²»é¡åº¦å…§ç„¡éœ€æ‰‹å‹•èª¿æ•´

## ğŸš€ æœ€ä½³å¯¦è¸

1. **æŒ‰ IP é™æµ**ï¼š`rate_limit:${clientIp}`
2. **æŒ‰ API é™æµ**ï¼š`rate_limit:${endpoint}`
3. **ç·©å­˜ TTL**ï¼šè¨­ç½®é©ç•¶éæœŸæ™‚é–“ï¼ˆ60s-1hï¼‰
4. **ç›£æ§å‘Šè­¦**ï¼šå‘½ä»¤ä½¿ç”¨ç‡ >80% æ™‚é—œæ³¨

## ğŸ“š åƒè€ƒè³‡æº

- [Upstash å®˜æ–¹æ–‡æª”](https://upstash.com/docs/redis)
- [REST API åƒè€ƒ](https://upstash.com/docs/redis/redis-rest)
- [Rate Limiting æœ€ä½³å¯¦è¸](https://upstash.com/blog/rate-limiting-with-upstash-redis)

---

**æœ€å¾Œæ›´æ–°**ï¼šåŸºæ–¼æœ€æ–° Upstash å…è²»æ–¹æ¡ˆ  
**é©ç”¨ç‰ˆæœ¬**ï¼šoece.tech v1.x  
**ç‹€æ…‹**ï¼šğŸŸ¢ ç”Ÿç”¢ç’°å¢ƒå°±ç·’